<svg viewBox="0 0 1200 1400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .layer-bg { fill: #f8f9fa; stroke: #2c3e50; stroke-width: 2; }
      .component-box { fill: #ffffff; stroke: #3498db; stroke-width: 1.5; }
      .title-text { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #2c3e50; }
      .subtitle-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #34495e; }
      .detail-text { font-family: Arial, sans-serif; font-size: 11px; fill: #555; }
      .layer-title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #2c3e50; }
      .external-box { fill: #e8f4f8; stroke: #16a085; stroke-width: 1.5; stroke-dasharray: 5,3; }
      .api-layer { fill: #3498db; opacity: 0.1; }
    </style>
    
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:0.2" />
      <stop offset="100%" style="stop-color:#3498db;stop-opacity:0.05" />
    </linearGradient>
  </defs>
  
  <!-- Electron 桌面应用层 -->
  <rect x="20" y="20" width="1160" height="50" rx="5" fill="url(#headerGrad)" stroke="#3498db" stroke-width="2"/>
  <text x="600" y="50" text-anchor="middle" class="title-text">Electron 桌面应用</text>
  
  <!-- Vue 3 前端框架层 -->
  <rect x="20" y="90" width="1160" height="220" rx="5" class="layer-bg"/>
  <text x="40" y="115" class="layer-title">Vue 3 前端框架</text>
  
  <!-- 前端组件 -->
  <g id="frontend-components">
    <!-- 搜索组件 -->
    <rect x="40" y="130" width="260" height="160" rx="4" class="component-box"/>
    <text x="170" y="150" text-anchor="middle" class="subtitle-text">搜索组件</text>
    <text x="50" y="170" class="detail-text">• 多模态输入</text>
    <text x="60" y="188" class="detail-text">- 文本输入</text>
    <text x="60" y="203" class="detail-text">- 语音录音</text>
    <text x="60" y="218" class="detail-text">- 图片上传</text>
    <text x="50" y="236" class="detail-text">• 搜索结果展示</text>
    <text x="50" y="254" class="detail-text">• 搜索历史管理</text>
    
    <!-- 索引组件 -->
    <rect x="320" y="130" width="260" height="160" rx="4" class="component-box"/>
    <text x="450" y="150" text-anchor="middle" class="subtitle-text">索引组件</text>
    <text x="330" y="170" class="detail-text">• 索引管理</text>
    <text x="340" y="188" class="detail-text">- 创建索引</text>
    <text x="340" y="203" class="detail-text">- 更新索引</text>
    <text x="340" y="218" class="detail-text">- 索引状态</text>
    <text x="340" y="233" class="detail-text">- 进度监控</text>
    <text x="330" y="251" class="detail-text">• 索引配置</text>
    
    <!-- 配置组件 -->
    <rect x="600" y="130" width="260" height="160" rx="4" class="component-box"/>
    <text x="730" y="150" text-anchor="middle" class="subtitle-text">配置组件</text>
    <text x="610" y="170" class="detail-text">• AI模型配置</text>
    <text x="620" y="188" class="detail-text">- 模型路径</text>
    <text x="620" y="203" class="detail-text">- 模型切换</text>
    <text x="620" y="218" class="detail-text">- 性能监控</text>
    
    <!-- 设置组件 -->
    <rect x="880" y="130" width="260" height="160" rx="4" class="component-box"/>
    <text x="1010" y="150" text-anchor="middle" class="subtitle-text">设置组件</text>
    <text x="890" y="170" class="detail-text">• 应用设置</text>
    <text x="900" y="188" class="detail-text">- 快捷键</text>
    <text x="900" y="203" class="detail-text">- 主题设置</text>
    <text x="900" y="218" class="detail-text">- 隐私设置</text>
    <text x="900" y="233" class="detail-text">- 日志查看</text>
  </g>
  
  <!-- HTTP API 通信层 -->
  <rect x="20" y="330" width="1160" height="45" rx="5" class="api-layer" stroke="#3498db" stroke-width="2"/>
  <text x="600" y="355" text-anchor="middle" class="layer-title">HTTP API 通信层</text>
  <text x="600" y="368" text-anchor="middle" class="detail-text">(Axios + FastAPI + WebSocket)</text>
  
  <!-- 后端服务层 -->
  <rect x="20" y="395" width="1160" height="180" rx="5" class="layer-bg"/>
  <text x="40" y="420" class="layer-title">后端服务</text>
  
  <g id="backend-apis">
    <!-- 搜索API -->
    <rect x="40" y="435" width="260" height="120" rx="4" class="component-box"/>
    <text x="170" y="455" text-anchor="middle" class="subtitle-text">搜索API</text>
    <text x="50" y="473" class="detail-text">/api/search/*</text>
    <text x="50" y="491" class="detail-text">• 多模态搜索</text>
    <text x="50" y="506" class="detail-text">• 混合搜索</text>
    <text x="50" y="521" class="detail-text">• 查询增强</text>
    <text x="50" y="536" class="detail-text">• 结果排序</text>
    
    <!-- 索引API -->
    <rect x="320" y="435" width="260" height="120" rx="4" class="component-box"/>
    <text x="450" y="455" text-anchor="middle" class="subtitle-text">索引API</text>
    <text x="330" y="473" class="detail-text">/api/index/*</text>
    <text x="330" y="491" class="detail-text">• 创建索引</text>
    <text x="330" y="506" class="detail-text">• 更新索引</text>
    <text x="330" y="521" class="detail-text">• 索引状态</text>
    <text x="330" y="536" class="detail-text">• 进度查询</text>
    
    <!-- 配置API -->
    <rect x="600" y="435" width="260" height="120" rx="4" class="component-box"/>
    <text x="730" y="455" text-anchor="middle" class="subtitle-text">配置API</text>
    <text x="610" y="473" class="detail-text">/api/config/*</text>
    <text x="610" y="491" class="detail-text">• AI模型管理</text>
    <text x="610" y="506" class="detail-text">• 配置读取</text>
    <text x="610" y="521" class="detail-text">• 配置保存</text>
    
    <!-- 系统API -->
    <rect x="880" y="435" width="260" height="120" rx="4" class="component-box"/>
    <text x="1010" y="455" text-anchor="middle" class="subtitle-text">系统API</text>
    <text x="890" y="473" class="detail-text">/api/system/*</text>
    <text x="890" y="491" class="detail-text">• 健康检查</text>
    <text x="890" y="506" class="detail-text">• 性能监控</text>
    <text x="890" y="521" class="detail-text">• 日志管理</text>
    <text x="890" y="536" class="detail-text">• 版本信息</text>
  </g>
  
  <!-- 核心服务层 -->
  <rect x="20" y="595" width="1160" height="180" rx="5" class="layer-bg"/>
  <text x="40" y="620" class="layer-title">核心服务层</text>
  
  <g id="core-services">
    <!-- 搜索服务 -->
    <rect x="40" y="635" width="260" height="120" rx="4" class="component-box"/>
    <text x="170" y="655" text-anchor="middle" class="subtitle-text">搜索服务</text>
    <text x="50" y="673" class="detail-text">• 向量搜索</text>
    <text x="50" y="688" class="detail-text">• 全文搜索</text>
    <text x="50" y="703" class="detail-text">• 混合搜索排序</text>
    <text x="50" y="718" class="detail-text">• 语义匹配</text>
    <text x="50" y="733" class="detail-text">• 结果过滤</text>
    
    <!-- 索引服务 -->
    <rect x="320" y="635" width="260" height="120" rx="4" class="component-box"/>
    <text x="450" y="655" text-anchor="middle" class="subtitle-text">索引服务</text>
    <text x="330" y="673" class="detail-text">• 文件系统扫描</text>
    <text x="330" y="688" class="detail-text">• 文件内容提取</text>
    <text x="330" y="703" class="detail-text">• 分块处理</text>
    <text x="330" y="718" class="detail-text">• 增量更新</text>
    <text x="330" y="733" class="detail-text">• 索引构建</text>
    
    <!-- AI模型管理服务 -->
    <rect x="600" y="635" width="260" height="120" rx="4" class="component-box"/>
    <text x="730" y="655" text-anchor="middle" class="subtitle-text">AI模型管理服务</text>
    <text x="610" y="673" class="detail-text">• 模型生命周期</text>
    <text x="610" y="688" class="detail-text">• 模型配置管理</text>
    <text x="610" y="703" class="detail-text">• 模型状态监控</text>
    <text x="610" y="718" class="detail-text">• 热重载支持</text>
    <text x="610" y="733" class="detail-text">• 性能基准测试</text>
    
    <!-- 查询增强服务 -->
    <rect x="880" y="635" width="260" height="120" rx="4" class="component-box"/>
    <text x="1010" y="655" text-anchor="middle" class="subtitle-text">查询增强服务</text>
    <text x="890" y="673" class="detail-text">• LLM查询扩展</text>
    <text x="890" y="688" class="detail-text">• 同义词替换</text>
    <text x="890" y="703" class="detail-text">• 查询重写</text>
    <text x="890" y="718" class="detail-text">• 智能补全</text>
    <text x="890" y="733" class="detail-text">• 查询意图理解</text>
  </g>
  
  <!-- AI模型集成层 -->
  <rect x="20" y="795" width="1160" height="160" rx="5" class="layer-bg"/>
  <text x="40" y="820" class="layer-title">AI模型集成层</text>
  
  <g id="ai-models">
    <!-- 文本嵌入模型 -->
    <rect x="40" y="835" width="260" height="100" rx="4" class="component-box"/>
    <text x="170" y="855" text-anchor="middle" class="subtitle-text">文本嵌入模型</text>
    <text x="50" y="873" class="detail-text" font-weight="bold">BGE-M3</text>
    <text x="50" y="891" class="detail-text">• 语义向量生成</text>
    <text x="50" y="906" class="detail-text">• 中文优化</text>
    <text x="50" y="921" class="detail-text">• 高精度检索</text>
    
    <!-- 语音识别模型 -->
    <rect x="320" y="835" width="260" height="100" rx="4" class="component-box"/>
    <text x="450" y="855" text-anchor="middle" class="subtitle-text">语音识别模型</text>
    <text x="330" y="873" class="detail-text" font-weight="bold">FasterWhisper</text>
    <text x="330" y="891" class="detail-text">• 语音转文本</text>
    <text x="330" y="906" class="detail-text">• 多语言支持</text>
    <text x="330" y="921" class="detail-text">• 实时转录</text>
    
    <!-- 图像理解模型 -->
    <rect x="600" y="835" width="260" height="100" rx="4" class="component-box"/>
    <text x="730" y="855" text-anchor="middle" class="subtitle-text">图像理解模型</text>
    <text x="610" y="873" class="detail-text" font-weight="bold">CN-CLIP</text>
    <text x="610" y="891" class="detail-text">• 图像特征提取</text>
    <text x="610" y="906" class="detail-text">• 图文匹配</text>
    <text x="610" y="921" class="detail-text">• 中文图像理解</text>
    
    <!-- 大语言模型 -->
    <rect x="880" y="835" width="260" height="100" rx="4" class="component-box"/>
    <text x="1010" y="855" text-anchor="middle" class="subtitle-text">大语言模型</text>
    <text x="890" y="873" class="detail-text" font-weight="bold">Ollama (qwen2.5:1.5b)</text>
    <text x="890" y="891" class="detail-text">• 查询增强</text>
    <text x="890" y="906" class="detail-text">• 智能问答</text>
    <text x="890" y="921" class="detail-text">• 本地推理</text>
  </g>
  
  <!-- 存储引擎层 -->
  <rect x="20" y="975" width="1160" height="160" rx="5" class="layer-bg"/>
  <text x="40" y="1000" class="layer-title">存储引擎</text>
  
  <g id="storage-engines">
    <!-- Faiss -->
    <rect x="40" y="1015" width="260" height="100" rx="4" class="component-box"/>
    <text x="170" y="1035" text-anchor="middle" class="subtitle-text">Faiss 向量索引</text>
    <text x="50" y="1053" class="detail-text">• IVF索引</text>
    <text x="50" y="1068" class="detail-text">• 余弦相似度</text>
    <text x="50" y="1083" class="detail-text">• ANN检索</text>
    <text x="50" y="1098" class="detail-text">• 高效检索</text>
    
    <!-- Whoosh -->
    <rect x="320" y="1015" width="260" height="100" rx="4" class="component-box"/>
    <text x="450" y="1035" text-anchor="middle" class="subtitle-text">Whoosh 全文索引</text>
    <text x="330" y="1053" class="detail-text">• 倒排索引</text>
    <text x="330" y="1068" class="detail-text">• 模糊搜索</text>
    <text x="330" y="1083" class="detail-text">• 关键词高亮</text>
    <text x="330" y="1098" class="detail-text">• 中文分词</text>
    
    <!-- SQLite -->
    <rect x="600" y="1015" width="260" height="100" rx="4" class="component-box"/>
    <text x="730" y="1035" text-anchor="middle" class="subtitle-text">SQLite 关系数据库</text>
    <text x="610" y="1053" class="detail-text">• 配置信息</text>
    <text x="610" y="1068" class="detail-text">• 搜索历史</text>
    <text x="610" y="1083" class="detail-text">• 元数据</text>
    <text x="610" y="1098" class="detail-text">• 用户设置</text>
    
    <!-- 文件系统 -->
    <rect x="880" y="1015" width="260" height="100" rx="4" class="component-box"/>
    <text x="1010" y="1035" text-anchor="middle" class="subtitle-text">文件系统 本地存储</text>
    <text x="890" y="1053" class="detail-text">• 原始文件</text>
    <text x="890" y="1068" class="detail-text">• 分块文件</text>
    <text x="890" y="1083" class="detail-text">• 索引文件</text>
    <text x="890" y="1098" class="detail-text">• 模型文件</text>
  </g>
  
  <!-- 外部服务集成 -->
  <text x="40" y="1165" class="layer-title">🔗 外部服务集成</text>
  
  <g id="external-services">
    <!-- Ollama服务 -->
    <rect x="40" y="1180" width="260" height="100" rx="4" class="external-box"/>
    <text x="170" y="1200" text-anchor="middle" class="subtitle-text">Ollama服务</text>
    <text x="50" y="1218" class="detail-text">(本地大模型)</text>
    <text x="50" y="1236" class="detail-text">• qwen2.5:1.5b</text>
    <text x="50" y="1251" class="detail-text">• 模型管理</text>
    <text x="50" y="1266" class="detail-text">• 动态加载</text>
    
    <!-- FFmpeg工具 -->
    <rect x="320" y="1180" width="260" height="100" rx="4" class="external-box"/>
    <text x="450" y="1200" text-anchor="middle" class="subtitle-text">FFmpeg工具</text>
    <text x="330" y="1218" class="detail-text">(音视频处理)</text>
    <text x="330" y="1236" class="detail-text">• 音频格式转换</text>
    <text x="330" y="1251" class="detail-text">• 视频元数据</text>
    <text x="330" y="1266" class="detail-text">• 内容提取</text>
  </g>
  
  <!-- 连接线 -->
  <g id="connections" stroke="#95a5a6" stroke-width="2" fill="none" opacity="0.6">
    <!-- 前端到API层 -->
    <path d="M 170 290 L 170 330" marker-end="url(#arrowhead)"/>
    <path d="M 450 290 L 450 330" marker-end="url(#arrowhead)"/>
    <path d="M 730 290 L 730 330" marker-end="url(#arrowhead)"/>
    <path d="M 1010 290 L 1010 330" marker-end="url(#arrowhead)"/>
    
    <!-- API层到后端服务 -->
    <path d="M 170 375 L 170 435" marker-end="url(#arrowhead)"/>
    <path d="M 450 375 L 450 435" marker-end="url(#arrowhead)"/>
    <path d="M 730 375 L 730 435" marker-end="url(#arrowhead)"/>
    <path d="M 1010 375 L 1010 435" marker-end="url(#arrowhead)"/>
    
    <!-- 后端服务到核心服务 -->
    <path d="M 170 555 L 170 635" marker-end="url(#arrowhead)"/>
    <path d="M 450 555 L 450 635" marker-end="url(#arrowhead)"/>
    <path d="M 730 555 L 730 635" marker-end="url(#arrowhead)"/>
    <path d="M 1010 555 L 1010 635" marker-end="url(#arrowhead)"/>
    
    <!-- 核心服务到AI模型 -->
    <path d="M 170 755 L 170 835" marker-end="url(#arrowhead)"/>
    <path d="M 450 755 L 450 835" marker-end="url(#arrowhead)"/>
    <path d="M 730 755 L 730 835" marker-end="url(#arrowhead)"/>
    <path d="M 1010 755 L 1010 835" marker-end="url(#arrowhead)"/>
    
    <!-- AI模型到存储引擎 -->
    <path d="M 170 935 L 170 1015" marker-end="url(#arrowhead)"/>
    <path d="M 450 935 L 450 1015" marker-end="url(#arrowhead)"/>
    <path d="M 730 935 L 730 1015" marker-end="url(#arrowhead)"/>
    <path d="M 1010 935 L 1010 1015" marker-end="url(#arrowhead)"/>
    
    <!-- 外部服务连接 -->
    <path d="M 170 1115 L 170 1180" stroke="#16a085" stroke-dasharray="5,3"/>
    <path d="M 450 1115 L 450 1180" stroke="#16a085" stroke-dasharray="5,3"/>
  </g>
  
  <!-- 箭头标记 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#95a5a6" />
    </marker>
  </defs>
</svg>
