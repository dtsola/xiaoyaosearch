# 架构决策 - 多模态搜索提示词一致性方案

**决策日期**：2025年12月09日

## 背景
当前多模态搜索存在索引构建和搜索使用不同技术栈的问题。索引构建时使用OCR提取图片文字，搜索时使用CLIP模型理解图片内容，导致特征空间不匹配，搜索效果差。需要统一技术方案确保一致性。

## 解决方案
索引构建时同时使用OCR提取文字和CLIP生成图像理解描述，将两者融合后建立索引。图片搜索时仅使用CLIP模型理解用户上传图片，生成图像描述后在索引库中搜索匹配。确保搜索时的CLIP向量能准确匹配到索引时CLIP生成的图像内容。

## 影响
解决特征空间不匹配问题，显著提升图片搜索效果。索引构建时需要增加CLIP模型调用，可能影响索引构建速度，但搜索性能保持不变。需要在content_parser.py中为图片文件添加CLIP处理逻辑。

---

**决策编号**：AD-20251209-01