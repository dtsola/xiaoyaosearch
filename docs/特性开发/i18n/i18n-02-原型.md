# 原型设计：国际化（i18n）支持

> **文档类型**：原型设计文档
> **特性名称**：国际化（i18n）支持
> **设计状态**：已完成
> **创建时间**：2025-12-29
> **最后更新**：2025-12-29
> **关联文档**：[i18n PRD](./i18n-01-prd.md)

---

## 1. 设计概述

### 1.1 设计目标
为小遥搜索添加完整的中英文双语支持，通过直观的语言切换器和无缝的语言切换体验，让用户能够轻松使用熟悉的语言进行操作。

### 1.2 设计原则
- **一致性**：所有页面的语言切换方式保持一致
- **即时性**：语言切换无需重启应用，立即生效
- **持久化**：用户语言偏好自动保存
- **无侵入**：语言切换器不干扰主要功能操作

### 1.3 设计范围
- 语言切换器UI设计
- 各页面国际化文本布局适配
- 日期时间格式国际化显示
- 错误提示国际化样式

---

## 2. 核心交互设计

### 2.1 语言切换器设计

#### 位置与布局
```
┌─────────────────────────────────────────────────────────────┐
│  ◤小遥搜索◢ v1.0      首页  设置  索引  帮助    [🌐 中文 ▼]  👤 │
└─────────────────────────────────────────────────────────────┘
                          ↑
                    语言切换器位置
                  （顶部导航栏右侧）
```

#### 交互状态

**默认状态**
```
┌──────────────┐
│  🌐 中文  ▼  │  ← 当前语言高亮显示
└──────────────┘
```

**悬停状态**
```
┌──────────────┐
│  🌐 中文  ▼  │  ← 背景色变深
└──────────────┘
```

**展开状态**
```
┌──────────────┐
│  🌐 中文  ▼  │
└──┬───────────┘
   │
   ↓
┌──────────────┐
│  ✓ 中文      │  ← 当前语言带对勾标识
│     English  │
└──────────────┘
```

**选择动画**
```
1. 用户点击语言选项
   ↓
2. 菜单收起（100ms淡出）
   ↓
3. 界面文本渐变切换（200ms淡入淡出）
   ↓
4. 显示成功提示："语言已切换" / "Language changed"（1秒后自动消失）
   ↓
5. 语言偏好保存到LocalStorage
```

### 2.2 语言切换流程

```
用户操作流程：
┌──────────────┐
│ 点击语言按钮  │
└──────┬───────┘
       ↓
┌──────────────┐
│ 显示语言菜单  │
└──────┬───────┘
       ↓
┌──────────────┐
│ 选择目标语言  │
└──────┬───────┘
       ↓
┌──────────────┐
│ 保存到本地存储│
└──────┬───────┘
       ↓
┌──────────────┐
│ 界面重新渲染  │
└──────┬───────┘
       ↓
┌──────────────┐
│ 显示成功提示  │
└──────────────┘
```

### 2.3 首次启动语言选择

**设计决策**：不强制首次语言选择，使用系统语言智能检测

```
启动流程：
应用启动
  ↓
检测系统语言
  ↓
┌─────────────────────────────┐
│ 系统语言 == 'zh-CN' ?       │
└────┬────────────────────┬───┘
     ↓ 是                 ↓ 否
  设置中文            设置英文
     ↓                   ↓
  保存到LocalStorage  保存到LocalStorage
     ↓                   ↓
  └──────────┬──────────┘
             ↓
        加载语言包
             ↓
        渲染界面
```

---

## 3. 页面设计详解

### 3.1 顶部导航栏（App.vue）

#### 中文版
```
┌─────────────────────────────────────────────────────────────────────┐
│ ◤小遥搜索◢ v1.0     │ 首页 │ 设置 │ 索引 │ 帮助 │    [🌐 中文 ▼]  👤 │
└─────────────────────────────────────────────────────────────────────┘
   Logo               导航菜单                         语言    用户
```

#### 英文版
```
┌─────────────────────────────────────────────────────────────────────┐
│ XiaoyaoSearch v1.0 │ Home │ Settings │ Index │ Help │ [🌐 English ▼] 👤 │
└─────────────────────────────────────────────────────────────────────┘
```

#### 布局规范
| 元素 | 宽度 | 间距 | 对齐 |
|-----|------|-----|------|
| Logo区域 | 180px | - | 左对齐 |
| 导航菜单 | 自适应 | 左右8px | 居中 |
| 语言切换器 | 100px | 右侧3px | 右对齐 |
| 用户按钮 | 120px | - | 右对齐 |

### 3.2 首页（Home.vue）

#### 搜索区域

**中文版**
```
┌─────────────────────────────────────────────────────────┐
│                    多模态智能搜索                        │
│              让文件搜索变得简单高效                      │
│  ┌─────────────────────────────────────────────────┐   │
│  │  输入搜索内容...                                 │   │
│  └─────────────────────────────────────────────────┘   │
│  [ 🎤 语音输入 ]  [ 🖼️ 图片输入 ]  [ 🔍 开始搜索 ]     │
└─────────────────────────────────────────────────────────┘
```

**英文版**
```
┌─────────────────────────────────────────────────────────┐
│              Multimodal AI Search                        │
│           Making File Search Simple & Efficient         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  Enter search content...                         │   │
│  └─────────────────────────────────────────────────┘   │
│  [ 🎤 Voice ]  [ 🖼️ Image ]  [ 🔍 Search ]            │
└─────────────────────────────────────────────────────────┘
```

#### 搜索结果卡片

**中文版**
```
┌────────────────────────────────────────────┐
│ 匹配度: 85%  │ 语义匹配        │ [打开] [复制路径] │
├────────────────────────────────────────────┤
│ 这是一段关于AI技术的文档内容...             │
│                                            │
│ 📄 项目文档.pdf  │ 2.3 MB  │ 2分钟前        │
└────────────────────────────────────────────┘
```

**英文版**
```
┌────────────────────────────────────────────┐
│ Match: 85%  │ Semantic Match  │ [Open] [Copy Path] │
├────────────────────────────────────────────┤
│ This is a document about AI technology...  │
│                                            │
│ 📄 Project Doc.pdf  │ 2.3 MB  │ 2 minutes ago    │
└────────────────────────────────────────────┘
```

### 3.3 设置页面（Settings.vue）

#### 标签页导航

**中文版**
```
┌─────────────────────────────────────────────────┐
│ [通用设置] [语音设置] [大语言模型] [视觉模型]   │
└─────────────────────────────────────────────────┘
```

**英文版**
```
┌─────────────────────────────────────────────────┐
│ [General] [Speech] [LLM] [Vision]               │
└─────────────────────────────────────────────────┘
```

#### 设置项布局

**中文版**
```
┌──────────────────────────────────────────────────┐
│ 语音识别                                          │
│ ┌────────────────────────────────────────────┐  │
│ │ 本地FastWhisper服务                          │  │
│ │ 使用本地部署的FastWhisper模型进行语音识别     │  │
│ │                                            │  │
│ │ 模型版本:  [Base ▼]                         │  │
│ │ 运行设备:  [CPU ▼]                          │  │
│ │                                            │  │
│ │              [ 检查可用性 ]  [ 保存设置 ]   │  │
│ └────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────┘
```

**英文版**
```
┌──────────────────────────────────────────────────┐
│ Voice Recognition                                 │
│ ┌────────────────────────────────────────────┐  │
│ │ Local FastWhisper Service                   │  │
│ │ Use locally deployed FastWhisper model     │  │
│ │                                            │  │
│ │ Model Version:  [Base ▼]                   │  │
│ │ Device:  [CPU ▼]                           │  │
│ │                                            │  │
│ │           [ Check ]  [ Save Settings ]    │  │
│ └────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────┘
```

### 3.4 索引管理页面（Index.vue）

#### 索引列表

**中文版**
```
┌──────────────────────────────────────────────────────────┐
│ 索引管理                    [ + 添加索引 ]               │
├──────────────────────────────────────────────────────────┤
│ ┌────────────────────────────────────────────────────┐  │
│ │ 📁 D:\Documents                                  │  │
│ │                                                    │  │
│ │ 状态: ● 已完成  │ 文件数: 1,234  │ 大小: 2.3 GB   │  │
│ │ 创建时间: 2025-12-29  │ 处理时间: 1分19秒         │  │
│ │                                                    │  │
│ │ [ 更新索引 ]  [ 停止 ]  [ 删除 ]                  │  │
│ └────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────┘
```

**英文版**
```
┌──────────────────────────────────────────────────────────┐
│ Index Management                 [ + Add Index ]          │
├──────────────────────────────────────────────────────────┤
│ ┌────────────────────────────────────────────────────┐  │
│ │ 📁 D:\Documents                                  │  │
│ │                                                    │  │
│ │ Status: ● Completed  │ Files: 1,234  │ Size: 2.3 GB │  │
│ │ Created: 2025-12-29  │ Processing: 1m 19s        │  │
│ │                                                    │  │
│ │ [ Update ]  [ Pause ]  [ Delete ]                │  │
│ └────────────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────────────┘
```

#### 索引元数据详情

**中文版**
```
┌─────────────────────────────────────────┐
│ 索引元数据                               │
├─────────────────────────────────────────┤
│ 状态        │ 已完成                     │
│ 文件数量    │ 1,234 个                   │
│ 总大小      │ 2.3 GB                     │
│ 创建时间    │ 2025-12-29 10:30:00       │
│ 更新时间    │ 2025-12-29 14:25:00       │
│ 处理时间    │ 1分19秒                    │
└─────────────────────────────────────────┘
```

**英文版**
```
┌─────────────────────────────────────────┐
│ Index Metadata                           │
├─────────────────────────────────────────┤
│ Status      │ Completed                 │
│ File Count  │ 1,234 files               │
│ Total Size  │ 2.3 GB                    │
│ Created At  │ 2025-12-29 10:30:00       │
│ Updated At  │ 2025-12-29 14:25:00       │
│ Processing Time │ 1m 19s                │
└─────────────────────────────────────────┘
```

### 3.5 关于页面（About.vue）

#### 作者卡片

**中文版**
```
┌──────────────────────────────────────────────────────────┐
│                        关于作者                           │
│  ┌──────┐  IT解决方案架构师 │ 一人公司实践者             │
│  │ 头像 │  专注于AI驱动的生产力工具开发                  │
│  └──────┘  致力于为知识工作者打造更智能的本地搜索方案    │
│                                                            │
│  开发理念：简约而不简单，智能而不 invasive                │
│  品牌使命：打造真正为个人用户服务的AI工具                 │
└──────────────────────────────────────────────────────────┘
```

**英文版**
```
┌──────────────────────────────────────────────────────────┐
│                      About Author                        │
│  ┌──────┐  IT Solution Architect │ One-Person Company   │
│  │Avatar│  Focused on AI-driven productivity tools      │
│  └──────┘  Creating smarter local search solutions      │
│                                                            │
│  Philosophy: Simple but not simplistic, smart but not invasive │
│  Mission: Create AI tools that truly serve individual users     │
└──────────────────────────────────────────────────────────┘
```

### 3.6 帮助页面（Help.vue）

#### 标签页导航

**中文版**
```
┌─────────────────────────────────────────────────┐
│ [快速入门] [使用教程] [常见问题] [关于]         │
└─────────────────────────────────────────────────┘
```

**英文版**
```
┌─────────────────────────────────────────────────┐
│ [Guide] [Tutorial] [FAQ] [About]                │
└─────────────────────────────────────────────────┘
```

#### 快速入门

**中文版**
```
┌──────────────────────────────────────────────────┐
│ 快速入门                                          │
├──────────────────────────────────────────────────┤
│ ┌────────────────────────────────────────────┐  │
│ │ 步骤1：配置AI模型                           │  │
│ │ 进入设置页面配置本地AI模型服务，            │  │
│ │ 确保所有服务正常运行                        │  │
│ │                                            │  │
│ │              [ 前往设置 ]                  │  │
│ └────────────────────────────────────────────┘  │
│                                                   │
│ ┌────────────────────────────────────────────┐  │
│ │ 步骤2：添加索引文件夹                       │  │
│ │ 进入索引管理页面，添加需要搜索的文件夹      │  │
│ │ 并创建文件索引                              │  │
│ │                                            │  │
│ │              [ 前往索引 ]                  │  │
│ └────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────┘
```

**英文版**
```
┌──────────────────────────────────────────────────┐
│ Quick Start                                       │
├──────────────────────────────────────────────────┤
│ ┌────────────────────────────────────────────┐  │
│ │ Step 1: Configure AI Models                 │  │
│ │ Go to Settings page to configure local     │  │
│ │ AI model services and ensure they are      │  │
│ │ running properly                            │  │
│ │                                            │  │
│ │              [ Go to Settings ]            │  │
│ └────────────────────────────────────────────┘  │
│                                                   │
│ ┌────────────────────────────────────────────┐  │
│ │ Step 2: Add Index Folders                  │  │
│ │ Go to Index Management page, add folders   │  │
│ │ to search and create file indexes          │  │
│ │                                            │  │
│ │              [ Go to Index ]               │  │
│ └────────────────────────────────────────────┘  │
└──────────────────────────────────────────────────┘
```

---

## 4. 错误提示国际化设计

### 4.1 全局错误提示

#### 位置与样式
```
┌────────────────────────────────────────────┐
│                                            │
│           ┌──────────────────┐             │
│           │ ⚠️ 索引不存在     │             │
│           └──────────────────┘             │
│              ↑ 顶部居中浮动                 │
│         3秒后自动消失                      │
└────────────────────────────────────────────┘
```

#### 错误类型对比

**网络错误**
```
中文: 网络连接失败，请检查后端服务是否运行
英文: Network connection failed, please check if backend service is running
```

**权限错误**
```
中文: 权限被拒绝
英文: Permission denied
```

**参数错误**
```
中文: 请求参数错误
英文: Bad request
```

### 4.2 表单验证提示

**中文版**
```
┌─────────────────────────────────────┐
│ 保存配置                            │
├─────────────────────────────────────┤
│ API地址: [http://localhost:11434]   │ ← 红色边框
│                                     │
│ ⚠️ 请输入有效的URL地址             │ ← 错误提示
│                                     │
│           [取消]  [重试]            │
└─────────────────────────────────────┘
```

**英文版**
```
┌─────────────────────────────────────┐
│ Save Configuration                  │
├─────────────────────────────────────┤
│ API URL: [http://localhost:11434]   │ ← Red border
│                                     │
│ ⚠️ Please enter a valid URL         │ ← Error message
│                                     │
│           [Cancel]  [Retry]         │
└─────────────────────────────────────┘
```

---

## 5. 日期时间国际化设计

### 5.1 相对时间格式

**中文版**
```
刚刚      - < 1分钟
5分钟前   - < 1小时
2小时前   - < 24小时
昨天      - 1天
3天前     - < 7天
2025/12/25 - >= 7天
```

**英文版**
```
Just now          - < 1 minute
5 minutes ago     - < 1 hour
2 hours ago       - < 24 hours
Yesterday         - 1 day
3 days ago        - < 7 days
12/25/2025        - >= 7 days
```

### 5.2 绝对时间格式

**中文版**
```
完整: 2025年12月29日 15:30:45
简短: 2025/12/29 15:30
```

**英文版**
```
Full: Dec 29, 2025, 3:30:45 PM
Short: 12/29/2025 3:30 PM
```

### 5.3 时间跨度格式

**中文版**
```
1分19秒
2小时30分15秒
```

**英文版**
```
1m 19s
2h 30m 15s
```

---

## 6. 响应式设计

### 6.1 桌面端（>768px）

**语言切换器**
```
┌─────────────────────┐
│     🌐 中文  ▼      │  ← 完整文字显示
└─────────────────────┘
```

### 6.2 移动端/窄屏（<=768px）

**语言切换器**
```
┌──────────┐
│ 🌐 中文 ▼│  ← 紧凑布局
└──────────┘
```

**导航菜单调整**
```
┌──────────────────────────┐
│ ◤小遥◢  [🌐]  [👤]       │  ← 只显示图标
└──────────────────────────┘
```

---

## 7. 动画设计

### 7.1 语言切换动画

**淡入淡出效果**
```css
/* 组件级过渡 */
.fade-enter-active, .fade-leave-active {
  transition: opacity 200ms ease;
}
.fade-enter-from, .fade-leave-to {
  opacity: 0;
}
```

**时序**
```
0ms   - 点击语言选项
100ms - 菜单收起完成
200ms - 界面文本开始淡出
400ms - 界面文本完全淡出，开始淡入新语言
600ms - 界面文本完全淡入
800ms - 显示成功提示
1800ms - 成功提示消失
```

### 7.2 消息提示动画

**顶部滑入**
```
┌─────────────────────────────┐
│    ✓ 语言已切换   [×]        │  ← 从顶部滑入（200ms）
└─────────────────────────────┘
     ↓ 等待1秒
┌─────────────────────────────┐
│    ✓ 语言已切换   [×]        │  ← 向上滑出（100ms）
└─────────────────────────────┘
```

---

## 8. 设计规范

### 8.1 字体规范

**中文版**
```
标题: 18px, Medium
正文: 14px, Regular
小字: 12px, Regular
```

**英文版**
```
标题: 16px, Medium
正文: 13px, Regular
小字: 11px, Regular
```

### 8.2 间距规范

```
语言切换器内边距: 8px 12px
语言菜单项高度: 36px
语言菜单项间距: 4px
下拉菜单最小宽度: 120px
```

### 8.3 颜色规范

```
默认背景: #ffffff
悬停背景: #f5f5f5
选中背景: #e6f7ff
文字颜色: #262626
边框颜色: #d9d9d9
图标颜色: #595959
```

---

## 9. 可访问性设计

### 9.1 键盘导航

```
Tab   - 聚焦到语言切换器
Enter - 展开语言菜单
↑/↓   - 在语言选项中导航
Enter - 选择语言
Esc   - 关闭语言菜单
```

### 9.2 屏幕阅读器支持

```html
<!-- 语言切换器ARIA属性 -->
<button
  aria-label="切换语言 / Switch Language"
  aria-expanded="false"
  aria-haspopup="true">
  🌐 中文 ▼
</button>

<!-- 语言菜单 -->
<ul role="menu">
  <li role="menuitem" aria-checked="true">中文</li>
  <li role="menuitem" aria-checked="false">English</li>
</ul>
```

### 9.3 焦点指示器

```
┌─────────────────────┐
│ ╔═══ 🌐 中文 ═══╗   │  ← 蓝色边框指示焦点
└─────────────────────┘
```

---

## 10. 视觉资源

### 10.1 图标设计

**语言图标**
```
🌐 Unicode: U+1F310
大小: 16x16px
颜色: inherit
```

**对勾图标**
```
✓ Unicode: U+2713
大小: 12x12px
颜色: #52c41a (绿色)
```

### 10.2 截图资源

**需要提供的截图**
1. 中文界面完整截图
   - 首页
   - 设置页面
   - 索引管理页面
   - 关于页面

2. 英文界面完整截图
   - 首页
   - 设置页面
   - 索引管理页面
   - 关于页面

3. 交互截图
   - 语言菜单展开
   - 语言切换过程
   - 成功提示

---

## 11. 实现检查清单

### 11.1 前端实现
- [x] 语言切换器组件
- [x] 语言包文件（zh-CN.ts, en-US.ts）
- [x] i18n配置和初始化
- [x] 所有页面文本国际化
- [x] 日期时间格式国际化
- [x] 错误提示国际化
- [x] 语言偏好持久化

### 11.2 样式实现
- [x] 语言切换器样式
- [x] 下拉菜单样式
- [x] 响应式布局适配
- [x] 过渡动画
- [x] 焦点指示器

### 11.3 交互实现
- [x] 语言切换逻辑
- [x] LocalStorage读写
- [x] 成功提示显示
- [x] 键盘导航支持

---

## 12. 后续优化

### 12.1 UI优化
- [ ] 添加语言切换快捷键（Ctrl+L）
- [ ] 优化长文本的翻译布局
- [ ] 添加语言切换动画配置选项

### 12.2 功能优化
- [ ] 支持自动检测系统语言
- [ ] 添加语言包热更新
- [ ] 支持自定义语言包

---

**文档结束**

> **实施状态**：✅ 已完成（2025-12-29）
> **设计覆盖**：所有页面组件已完成国际化设计
> **交互验证**：语言切换功能已通过用户体验测试